#include <stdio.h>
#include <stdlib.h>
int main(){
    int n,q;
    scanf("%d %d",&n,&q);
    int **seq=malloc(n*sizeof(int*));
    int *sizes=calloc(n,sizeof(int));
    int *capacities=calloc(n,sizeof(int));
    int lastAnswer=0;
    int *answers=malloc(q*sizeof(int));
    int ansCount=0;
    for(int i=0;i<n;i++){
        seq[i]=NULL;
        capacities[i]=0;
    }
    for(int i=0;i<q;i++){
        int type,x,y;
        scanf("%d %d %d",&type,&x,&y);
        int idx=(x^lastAnswer)%n;
        if(type==1){
            if(sizes[idx]==capacities[idx]){
                capacities[idx]=capacities[idx]==0?2:capacities[idx]*2;
                seq[idx]=realloc(seq[idx],capacities[idx]*sizeof(int));
            }
            seq[idx][sizes[idx]++]=y;
        }else if(type==2){
            int value=seq[idx][y%sizes[idx]];
            lastAnswer=value;
            answers[ansCount++]=lastAnswer;
        }
    }
    for(int i=0;i<ansCount;i++){
        printf("%d\n",answers[i]);
    }
    for(int i=0;i<n;i++){
        free(seq[i]);
    }
    free(seq);
    free(sizes);
    free(capacities);
    free(answers);
    return 0;
}